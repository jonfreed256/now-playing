{"ast":null,"code":"export var getMovies = function getMovies(moviesData) {\n  return {\n    type: 'GET_MOVIES',\n    payload: moviesData\n  };\n};\nexport var zipMovies = function zipMovies(zipCode, zipRadius) {\n  return function (dispatch) {\n    var currentDate = new Date().toISOString().slice(0, 10);\n    return fetch(\"http://data.tmsapi.com/v1.1/movies/showings?startDate=\".concat(currentDate, \"&zip=\").concat(zipCode, \"&radius=\").concat(zipRadius, \"&api_key=qp6xahv9m59kx2jambe8wvz7\"), {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      }\n    }).then(function (r) {\n      return r.json();\n    }).then(function (moviesData) {\n      return dispatch(getMovies(moviesData));\n    }).then(function (moviesData) {\n      return persistMovies(moviesData);\n    });\n  };\n};\n\nvar persistMovies = function persistMovies(moviesData) {\n  console.log('persist', moviesData.payload);\n  var moviesArray = moviesData.payload.map(function (movie) {\n    return movie.title;\n  });\n  moviesArray.forEach(function (title) {\n    return fetch('http://localhost:3001/api/v1/movies', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({\n        title: title\n      })\n    });\n  });\n};\n\nexport var selectMovie = function selectMovie(movie) {\n  return {\n    type: 'SELECT_MOVIE',\n    payload: movie\n  };\n};\nexport var addPlaying = function addPlaying(nowPlaying) {\n  return {\n    type: 'ADD_PLAYING',\n    payload: nowPlaying\n  };\n};\nexport var getNowPlaying = function getNowPlaying() {\n  return function (dispatch) {\n    return fetch('https://api.themoviedb.org/3/movie/now_playing?api_key=83a86e6cebd651357db4273964ce2199&language=en-US&page=1').then(function (r) {\n      return r.json();\n    }).then(function (nowPlaying) {\n      return dispatch(addPlaying(nowPlaying));\n    }).catch(console.error);\n  };\n};\nexport var getNowPlayingTwo = function getNowPlayingTwo() {\n  return function (dispatch) {\n    return fetch('https://api.themoviedb.org/3/movie/now_playing?api_key=83a86e6cebd651357db4273964ce2199&language=en-US&page=2').then(function (r) {\n      return r.json();\n    }).then(function (nowPlaying) {\n      return dispatch(addPlaying(nowPlaying));\n    }).catch(console.error);\n  };\n};","map":{"version":3,"sources":["/Users/jonathanfreed/Development/AccessLabs/NowShowing/now-showing-client/src/Redux/Actions/movieAction.js"],"names":["getMovies","moviesData","type","payload","zipMovies","zipCode","zipRadius","dispatch","currentDate","Date","toISOString","slice","fetch","method","headers","then","r","json","persistMovies","console","log","moviesArray","map","movie","title","forEach","body","JSON","stringify","selectMovie","addPlaying","nowPlaying","getNowPlaying","catch","error","getNowPlayingTwo"],"mappings":"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","sourcesContent":["export const getMovies = (moviesData) => ({type: 'GET_MOVIES', payload: moviesData});\n\n\nexport const zipMovies =  (zipCode, zipRadius) => {\n  return dispatch => {\n    let currentDate = new Date().toISOString().slice(0,10);\n    return fetch(`http://data.tmsapi.com/v1.1/movies/showings?startDate=${currentDate}&zip=${zipCode}&radius=${zipRadius}&api_key=qp6xahv9m59kx2jambe8wvz7`, {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      }\n    })\n    .then(r => r.json())\n    .then(moviesData => dispatch(getMovies(moviesData)))\n    .then(moviesData => persistMovies(moviesData))\n  }\n};\n\nconst persistMovies = (moviesData) => {\n  console.log('persist', moviesData.payload)\n  let moviesArray = moviesData.payload.map(movie => movie.title);\n  moviesArray.forEach(title => {\n\n    return fetch('http://localhost:3001/api/v1/movies', {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n      'accepts': 'application/json'\n    },\n    body: JSON.stringify({ title})\n  })\n  })\n};\n\nexport const selectMovie = (movie) => ({type: 'SELECT_MOVIE', payload: movie});\n\nexport const addPlaying = (nowPlaying) => ({type: 'ADD_PLAYING', payload: nowPlaying});\n\nexport const getNowPlaying = () => {\n  return dispatch => {\n    return fetch('https://api.themoviedb.org/3/movie/now_playing?api_key=83a86e6cebd651357db4273964ce2199&language=en-US&page=1')\n    .then(r => r.json())\n    .then(nowPlaying => dispatch(addPlaying(nowPlaying)))\n    .catch(console.error)\n  }\n};\n\nexport const getNowPlayingTwo = () => {\n  return dispatch => {\n    return fetch('https://api.themoviedb.org/3/movie/now_playing?api_key=83a86e6cebd651357db4273964ce2199&language=en-US&page=2')\n    .then(r => r.json())\n    .then(nowPlaying => dispatch(addPlaying(nowPlaying)))\n    .catch(console.error)\n  }\n};"]},"metadata":{},"sourceType":"module"}