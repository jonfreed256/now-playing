{"ast":null,"code":"// export const loginUserPending = () => ({type: 'LOGIN_USER_PENDING', payload: null});\n//\n// export const loginUserError = (error) => ({type: 'LOGIN_USER_FAIL', payload: error});\nexport var loginUser = function loginUser(newUser) {\n  return {\n    type: 'LOGIN_USER',\n    payload: newUser\n  };\n};\nexport var logoutUser = function logoutUser() {\n  return {\n    type: 'USER_LOGOUT',\n    payload: null\n  };\n};\nexport var createUser = function createUser(newUser) {\n  return function (dispatch) {\n    return fetch('http://localhost:3001/api/v1/users', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({\n        user: newUser\n      })\n    }).then(function (r) {\n      return r.json();\n    }).then(function (newUser) {\n      if (newUser.jwt) {\n        localStorage.setItem('token', newUser.jwt);\n        dispatch(loginUser(newUser.user));\n      }\n    }).catch(function (error) {\n      return console.log(error);\n    });\n  };\n};\nexport var getUser = function getUser(token) {\n  return function (dispatch) {\n    return fetch('http://localhost:3001/api/v1/current_user', {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json',\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (r) {\n      return r.json();\n    }).then(function (currentUser) {\n      return dispatch(loginUser(currentUser));\n    }).catch(console.error);\n  };\n};\nexport var login = function login(user) {\n  return function (dispatch) {\n    // dispatch(loginUserPending());\n    return fetch('http://localhost:3001/api/v1/login', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({\n        user: user\n      })\n    }).then(function (r) {\n      return r.json();\n    }).then(function (currentUser) {\n      if (currentUser.jwt) {\n        localStorage.setItem('token', currentUser.jwt);\n        return dispatch(loginUser(currentUser));\n      } // }).catch(error => {\n      // dispatch(loginUserError(error))\n\n    });\n  };\n};","map":{"version":3,"sources":["/Users/jonathanfreed/Development/AccessLabs/NowShowing/now-showing-client/src/Redux/Actions/userAction.js"],"names":["loginUser","newUser","type","payload","logoutUser","createUser","dispatch","fetch","method","headers","body","JSON","stringify","user","then","r","json","jwt","localStorage","setItem","catch","error","console","log","getUser","token","Authorization","currentUser","login"],"mappings":"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","sourcesContent":["// export const loginUserPending = () => ({type: 'LOGIN_USER_PENDING', payload: null});\n//\n// export const loginUserError = (error) => ({type: 'LOGIN_USER_FAIL', payload: error});\n\nexport const loginUser = (newUser) => {\n  return {\n    type: 'LOGIN_USER',\n    payload: newUser}\n};\n\nexport const logoutUser = () => {\n    return {\n      type: 'USER_LOGOUT',\n      payload: null\n    }\n};\n\nexport const createUser = (newUser) => {\n  return dispatch => {\n    return fetch('http://localhost:3001/api/v1/users', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({user: newUser})\n    })\n        .then(r => r.json())\n        .then(newUser => {\n          if(newUser.jwt){\n          localStorage.setItem('token', newUser.jwt);\n          dispatch(loginUser(newUser.user))\n          }\n    }).catch(error => console.log(error))\n  }\n};\n\nexport const getUser =  (token) => {\n  return dispatch => {\n    return fetch('http://localhost:3001/api/v1/current_user', {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    })\n        .then(r => r.json())\n        .then(currentUser => dispatch(loginUser((currentUser))))\n        .catch(console.error)\n  }\n};\n\nexport const login = (user) => {\n  return dispatch => {\n    // dispatch(loginUserPending());\n    return fetch('http://localhost:3001/api/v1/login', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({user: user})\n    })\n        .then(r => r.json())\n        .then(currentUser => {\n          if(currentUser.jwt) {\n            localStorage.setItem('token', currentUser.jwt);\n            return dispatch(loginUser(currentUser))\n          }\n    // }).catch(error => {\n      // dispatch(loginUserError(error))\n    })\n  }\n};"]},"metadata":{},"sourceType":"module"}