{"ast":null,"code":"export var addUser = function addUser(newUser) {\n  return {\n    type: 'ADD_USER',\n    payload: newUser\n  };\n};\nexport var logoutUser = function logoutUser() {\n  return {\n    type: 'LOGOUT_USER',\n    payload: null\n  };\n};\nexport var createUser = function createUser(newUser) {\n  return function (dispatch) {\n    return fetch('http://localhost:3001/api/v1/users', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({\n        user: newUser\n      })\n    }).then(function (r) {\n      return r.json();\n    }).then(function (newUser) {\n      if (newUser.jwt) {\n        localStorage.setItem('token', newUser.jwt);\n        dispatch(addUser(newUser.user));\n      }\n    }).catch(function (error) {\n      return console.log(error);\n    });\n  };\n};\nexport var getUser = function getUser(token) {\n  return function (dispatch) {\n    return fetch('http://localhost:3001/api/v1/current_user', {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json',\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (r) {\n      return r.json();\n    }).then(function (currentUser) {\n      return dispatch(addUser(currentUser));\n    }).catch(console.error);\n  };\n};\nexport var login = function login(user) {\n  return function (dispatch) {\n    return fetch('http://localhost:3001/api/v1/login', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({\n        user: user\n      })\n    }).then(function (r) {\n      return r.json();\n    }).then(function (currentUser) {\n      if (currentUser.jwt) {\n        localStorage.setItem('token', currentUser.jwt);\n        return dispatch(addUser(currentUser));\n      }\n    }).catch(console.error);\n  };\n};","map":{"version":3,"sources":["/Users/jonathanfreed/Development/AccessLabs/NowShowing/now-showing-client/src/Redux/Actions/userAction.js"],"names":["addUser","newUser","type","payload","logoutUser","createUser","dispatch","fetch","method","headers","body","JSON","stringify","user","then","r","json","jwt","localStorage","setItem","catch","error","console","log","getUser","token","Authorization","currentUser","login"],"mappings":"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","sourcesContent":["export const addUser = (newUser) => ({type: 'ADD_USER', payload: newUser});\n\nexport const logoutUser = () => ({type: 'LOGOUT_USER', payload: null});\n\nexport const createUser = (newUser) => {\n  return dispatch => {\n    return fetch('http://localhost:3001/api/v1/users', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({user: newUser})\n    })\n        .then(r => r.json())\n        .then(newUser => {\n          if(newUser.jwt){\n          localStorage.setItem('token', newUser.jwt);\n          dispatch(addUser(newUser.user))\n          }\n    }).catch(error => console.log(error))\n  }\n};\n\nexport const getUser =  (token) => {\n  return dispatch => {\n    return fetch('http://localhost:3001/api/v1/current_user', {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    })\n        .then(r => r.json())\n        .then(currentUser => dispatch(addUser((currentUser))))\n        .catch(console.error)\n  }\n};\n\nexport const login = (user) => {\n  return dispatch => {\n    return fetch('http://localhost:3001/api/v1/login', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({user})\n    })\n        .then(r => r.json())\n        .then(currentUser => {\n          if(currentUser.jwt) {\n            localStorage.setItem('token', currentUser.jwt);\n            return dispatch(addUser(currentUser))\n          }\n    }).catch((console.error))\n  }\n};"]},"metadata":{},"sourceType":"module"}