{"ast":null,"code":"export var loginUserPending = function loginUserPending(newUser) {\n  return {\n    type: 'LOGIN_USER_PENDING',\n    payload: null\n  };\n};\nexport var loginUserFail = function loginUserFail(error) {\n  return {\n    type: 'LOGIN_USER_FAIL',\n    payload: error\n  };\n};\nexport var loginUser = function loginUser(newUser) {\n  return {\n    type: 'LOGIN_USER',\n    payload: newUser\n  };\n};\nexport var logoutUser = function logoutUser() {\n  return {\n    type: 'LOGOUT_USER',\n    payload: null\n  };\n};\nexport var createUser = function createUser(newUser) {\n  return function (dispatch) {\n    return fetch('http://localhost:3001/api/v1/users', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({\n        user: newUser\n      })\n    }).then(function (r) {\n      return r.json();\n    }).then(function (newUser) {\n      if (newUser.jwt) {\n        localStorage.setItem('token', newUser.jwt);\n        dispatch(loginUser(newUser.user));\n      }\n    }).catch(function (error) {\n      return console.log(error);\n    });\n  };\n};\nexport var getUser = function getUser(token) {\n  return function (dispatch) {\n    return fetch('http://localhost:3001/api/v1/current_user', {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json',\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (r) {\n      return r.json();\n    }).then(function (currentUser) {\n      return dispatch(loginUser(currentUser));\n    }).catch(console.error);\n  };\n};\nexport var login = function login(user) {\n  return function (dispatch) {\n    dispatch(loginUserPending());\n    return fetch('http://localhost:3001/api/v1/login', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({\n        user: user\n      })\n    }).then(function (r) {\n      return r.json();\n    }).then(function (currentUser) {\n      if (currentUser.jwt) {\n        localStorage.setItem('token', currentUser.jwt);\n        return dispatch(loginUser(currentUser));\n      }\n    }).catch(function (error) {\n      dispatch(loginUserError(error));\n    });\n  };\n};","map":{"version":3,"sources":["/Users/jonathanfreed/Development/AccessLabs/NowShowing/now-showing-client/src/Redux/Actions/userAction.js"],"names":["loginUserPending","newUser","type","payload","loginUserFail","error","loginUser","logoutUser","createUser","dispatch","fetch","method","headers","body","JSON","stringify","user","then","r","json","jwt","localStorage","setItem","catch","console","log","getUser","token","Authorization","currentUser","login","loginUserError"],"mappings":"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","sourcesContent":["export const loginUserPending = (newUser) => ({type: 'LOGIN_USER_PENDING', payload: null});\nexport const loginUserFail = (error) => ({type: 'LOGIN_USER_FAIL', payload: error});\nexport const loginUser = (newUser) => ({type: 'LOGIN_USER', payload: newUser});\n\nexport const logoutUser = () => ({type: 'LOGOUT_USER', payload: null});\n\nexport const createUser = (newUser) => {\n  return dispatch => {\n    return fetch('http://localhost:3001/api/v1/users', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({user: newUser})\n    })\n        .then(r => r.json())\n        .then(newUser => {\n          if(newUser.jwt){\n          localStorage.setItem('token', newUser.jwt);\n          dispatch(loginUser(newUser.user))\n          }\n    }).catch(error => console.log(error))\n  }\n};\n\nexport const getUser =  (token) => {\n  return dispatch => {\n    return fetch('http://localhost:3001/api/v1/current_user', {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    })\n        .then(r => r.json())\n        .then(currentUser => dispatch(loginUser((currentUser))))\n        .catch(console.error)\n  }\n};\n\nexport const login = (user) => {\n  return dispatch => {\n    dispatch(loginUserPending())\n    return fetch('http://localhost:3001/api/v1/login', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({user})\n    })\n        .then(r => r.json())\n        .then(currentUser => {\n          if(currentUser.jwt) {\n            localStorage.setItem('token', currentUser.jwt);\n            return dispatch(loginUser(currentUser))\n          }\n    }).catch(error => {\n      dispatch(loginUserError(error))\n    })\n  }\n};"]},"metadata":{},"sourceType":"module"}