{"ast":null,"code":"export var addUser = function addUser(newUser) {\n  return {\n    type: 'ADD_USER',\n    payload: newUser\n  };\n};\nexport var createUser = function createUser(newUser) {\n  return function (dispatch) {\n    return fetch('http://localhost:3001/api/v1/users', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({\n        user: newUser\n      })\n    }).then(function (r) {\n      return r.json();\n    }).then(function (newUser) {\n      if (newUser.jwt) {\n        localStorage.setItem('token', newUser.jwt);\n        dispatch(addUser(newUser.user));\n      }\n    }).catch(function (error) {\n      return console.log(error);\n    });\n  };\n};\nexport var getUser = function getUser(token) {\n  return function (dispatch) {\n    return fetch('http://localhost:3001/api/v1/current_user', {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json',\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (r) {\n      return r.json();\n    }).then(function (currentUser) {\n      return dispatch(addUser(currentUser));\n    }).catch(console.error);\n  };\n};\nexport var login = function login(user) {\n  return function (dispatch) {\n    return fetch('http://localhost:3001/api/v1/login', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({\n        user: user\n      })\n    }).then(function (r) {\n      return r.json();\n    }).then(function (currentUser) {\n      if (currentUser.jwt) {\n        console.log('login current user :', currentUser);\n        localStorage.setItem('token', currentUser.jwt);\n        return dispatch(addUser(currentUser));\n      }\n    }).catch(console.error);\n  };\n};\nexport var getMovies = function getMovies(moviesData) {\n  return {\n    type: 'GET_MOVIES',\n    payload: moviesData\n  };\n};\nexport var zipMovies = function zipMovies(zipCode, zipRadius) {\n  return function (dispatch) {\n    var currentDate = new Date().toISOString().slice(0, 10);\n    return fetch(\"http://data.tmsapi.com/v1.1/movies/showings?startDate=\".concat(currentDate, \"&zip=\").concat(zipCode, \"&radius=\").concat(zipRadius, \"&api_key=qp6xahv9m59kx2jambe8wvz7\"), {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      }\n    }).then(function (r) {\n      return r.json();\n    }).then(function (moviesData) {\n      return dispatch(getMovies(moviesData));\n    }).then(console.log).catch(console.error);\n  };\n};\nexport var selectMovie = function selectMovie(movie) {\n  return {\n    type: 'SELECT_MOVIE',\n    payload: movie\n  };\n};\nexport var addPlaying = function addPlaying(nowPlaying) {\n  return {\n    type: 'ADD_PLAYING',\n    payload: nowPlaying\n  };\n};\nexport var getNowPlaying = function getNowPlaying() {\n  return function (dispatch) {\n    return fetch('https://api.themoviedb.org/3/movie/now_playing?api_key=83a86e6cebd651357db4273964ce2199&language=en-US&page=1').then(function (r) {\n      return r.json();\n    }).then(function (nowPlaying) {\n      return dispatch(addPlaying(nowPlaying));\n    }).catch(console.error);\n  };\n};","map":{"version":3,"sources":["/Users/jonathanfreed/Development/AccessLabs/NowShowing/now-showing-client/src/Redux/Actions/action.js"],"names":["addUser","newUser","type","payload","createUser","dispatch","fetch","method","headers","body","JSON","stringify","user","then","r","json","jwt","localStorage","setItem","catch","error","console","log","getUser","token","Authorization","currentUser","login","getMovies","moviesData","zipMovies","zipCode","zipRadius","currentDate","Date","toISOString","slice","selectMovie","movie","addPlaying","nowPlaying","getNowPlaying"],"mappings":"AAAA,OAAO,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAACC,OAAD;AAAA,SAAc;AAACC,IAAAA,IAAI,EAAE,UAAP;AAAmBC,IAAAA,OAAO,EAAEF;AAA5B,GAAd;AAAA,CAAhB;AAEP,OAAO,IAAMG,UAAU,GAAG,SAAbA,UAAa,CAACH,OAAD,EAAa;AACrC,SAAO,UAAAI,QAAQ,EAAI;AACjB,WAAOC,KAAK,CAAC,oCAAD,EAAuC;AACjDC,MAAAA,MAAM,EAAE,MADyC;AAEjDC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,mBAAW;AAFJ,OAFwC;AAMjDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,QAAAA,IAAI,EAAEX;AAAP,OAAf;AAN2C,KAAvC,CAAL,CAQFY,IARE,CAQG,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,KARJ,EASFF,IATE,CASG,UAAAZ,OAAO,EAAI;AACf,UAAGA,OAAO,CAACe,GAAX,EAAe;AACfC,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BjB,OAAO,CAACe,GAAtC;AACAX,QAAAA,QAAQ,CAACL,OAAO,CAACC,OAAO,CAACW,IAAT,CAAR,CAAR;AACC;AACN,KAdM,EAcJO,KAdI,CAcE,UAAAC,KAAK;AAAA,aAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAJ;AAAA,KAdP,CAAP;AAeD,GAhBD;AAiBD,CAlBM;AAoBP,OAAO,IAAMG,OAAO,GAAI,SAAXA,OAAW,CAACC,KAAD,EAAW;AACjC,SAAO,UAAAnB,QAAQ,EAAI;AACjB,WAAOC,KAAK,CAAC,2CAAD,EAA8C;AACxDC,MAAAA,MAAM,EAAE,KADgD;AAExDC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,mBAAW,kBAFJ;AAGPiB,QAAAA,aAAa,mBAAYD,KAAZ;AAHN;AAF+C,KAA9C,CAAL,CAQFX,IARE,CAQG,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,KARJ,EASFF,IATE,CASG,UAAAa,WAAW;AAAA,aAAIrB,QAAQ,CAACL,OAAO,CAAE0B,WAAF,CAAR,CAAZ;AAAA,KATd,EAUFP,KAVE,CAUIE,OAAO,CAACD,KAVZ,CAAP;AAWD,GAZD;AAaD,CAdM;AAgBP,OAAO,IAAMO,KAAK,GAAG,SAARA,KAAQ,CAACf,IAAD,EAAU;AAC7B,SAAO,UAAAP,QAAQ,EAAI;AACjB,WAAOC,KAAK,CAAC,oCAAD,EAAuC;AACjDC,MAAAA,MAAM,EAAE,MADyC;AAEjDC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,mBAAW;AAFJ,OAFwC;AAMjDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,QAAAA,IAAI,EAAJA;AAAD,OAAf;AAN2C,KAAvC,CAAL,CAQFC,IARE,CAQG,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,KARJ,EASFF,IATE,CASG,UAAAa,WAAW,EAAI;AACnB,UAAGA,WAAW,CAACV,GAAf,EAAoB;AAClBK,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCI,WAApC;AACAT,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BQ,WAAW,CAACV,GAA1C;AACA,eAAOX,QAAQ,CAACL,OAAO,CAAC0B,WAAD,CAAR,CAAf;AACD;AACN,KAfM,EAeJP,KAfI,CAeGE,OAAO,CAACD,KAfX,CAAP;AAgBD,GAjBD;AAkBD,CAnBM;AAqBP,OAAO,IAAMQ,SAAS,GAAG,SAAZA,SAAY,CAACC,UAAD;AAAA,SAAiB;AAAC3B,IAAAA,IAAI,EAAE,YAAP;AAAqBC,IAAAA,OAAO,EAAE0B;AAA9B,GAAjB;AAAA,CAAlB;AAEP,OAAO,IAAMC,SAAS,GAAI,SAAbA,SAAa,CAACC,OAAD,EAAUC,SAAV,EAAwB;AAChD,SAAO,UAAA3B,QAAQ,EAAI;AACjB,QAAI4B,WAAW,GAAG,IAAIC,IAAJ,GAAWC,WAAX,GAAyBC,KAAzB,CAA+B,CAA/B,EAAiC,EAAjC,CAAlB;AACA,WAAO9B,KAAK,iEAA0D2B,WAA1D,kBAA6EF,OAA7E,qBAA+FC,SAA/F,wCAA6I;AACvJzB,MAAAA,MAAM,EAAE,KAD+I;AAEvJC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,mBAAW;AAFJ;AAF8I,KAA7I,CAAL,CAONK,IAPM,CAOD,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,KAPA,EAQNF,IARM,CAQD,UAAAgB,UAAU;AAAA,aAAIxB,QAAQ,CAACuB,SAAS,CAAEC,UAAF,CAAV,CAAZ;AAAA,KART,EASFhB,IATE,CASGQ,OAAO,CAACC,GATX,EAUNH,KAVM,CAUAE,OAAO,CAACD,KAVR,CAAP;AAWD,GAbD;AAcD,CAfM;AAiBP,OAAO,IAAMiB,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD;AAAA,SAAY;AAACpC,IAAAA,IAAI,EAAE,cAAP;AAAuBC,IAAAA,OAAO,EAAEmC;AAAhC,GAAZ;AAAA,CAApB;AAEP,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,UAAD;AAAA,SAAiB;AAACtC,IAAAA,IAAI,EAAE,aAAP;AAAsBC,IAAAA,OAAO,EAAEqC;AAA/B,GAAjB;AAAA,CAAnB;AAEP,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACjC,SAAO,UAAApC,QAAQ,EAAI;AACjB,WAAOC,KAAK,CAAC,+GAAD,CAAL,CACFO,IADE,CACG,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACC,IAAF,EAAJ;AAAA,KADJ,EAEFF,IAFE,CAEG,UAAA2B,UAAU;AAAA,aAAInC,QAAQ,CAACkC,UAAU,CAACC,UAAD,CAAX,CAAZ;AAAA,KAFb,EAGFrB,KAHE,CAGIE,OAAO,CAACD,KAHZ,CAAP;AAID,GALD;AAMD,CAPM","sourcesContent":["export const addUser = (newUser) => ({type: 'ADD_USER', payload: newUser});\n\nexport const createUser = (newUser) => {\n  return dispatch => {\n    return fetch('http://localhost:3001/api/v1/users', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({user: newUser})\n    })\n        .then(r => r.json())\n        .then(newUser => {\n          if(newUser.jwt){\n          localStorage.setItem('token', newUser.jwt);\n          dispatch(addUser(newUser.user))\n          }\n    }).catch(error => console.log(error))\n  }\n};\n\nexport const getUser =  (token) => {\n  return dispatch => {\n    return fetch('http://localhost:3001/api/v1/current_user', {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    })\n        .then(r => r.json())\n        .then(currentUser => dispatch(addUser((currentUser))))\n        .catch(console.error)\n  }\n};\n\nexport const login = (user) => {\n  return dispatch => {\n    return fetch('http://localhost:3001/api/v1/login', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      },\n      body: JSON.stringify({user})\n    })\n        .then(r => r.json())\n        .then(currentUser => {\n          if(currentUser.jwt) {\n            console.log('login current user :', currentUser);\n            localStorage.setItem('token', currentUser.jwt);\n            return dispatch(addUser(currentUser))\n          }\n    }).catch((console.error))\n  }\n};\n\nexport const getMovies = (moviesData) => ({type: 'GET_MOVIES', payload: moviesData});\n\nexport const zipMovies =  (zipCode, zipRadius) => {\n  return dispatch => {\n    let currentDate = new Date().toISOString().slice(0,10);\n    return fetch(`http://data.tmsapi.com/v1.1/movies/showings?startDate=${currentDate}&zip=${zipCode}&radius=${zipRadius}&api_key=qp6xahv9m59kx2jambe8wvz7`, {\n      method: 'GET',\n      headers: {\n        'content-type': 'application/json',\n        'accepts': 'application/json'\n      }\n    })\n    .then(r => r.json())\n    .then(moviesData => dispatch(getMovies((moviesData))))\n        .then(console.log)\n    .catch(console.error)\n  }\n};\n\nexport const selectMovie = (movie) => ({type: 'SELECT_MOVIE', payload: movie});\n\nexport const addPlaying = (nowPlaying) => ({type: 'ADD_PLAYING', payload: nowPlaying});\n\nexport const getNowPlaying = () => {\n  return dispatch => {\n    return fetch('https://api.themoviedb.org/3/movie/now_playing?api_key=83a86e6cebd651357db4273964ce2199&language=en-US&page=1')\n        .then(r => r.json())\n        .then(nowPlaying => dispatch(addPlaying(nowPlaying)))\n        .catch(console.error)\n  }\n};"]},"metadata":{},"sourceType":"module"}